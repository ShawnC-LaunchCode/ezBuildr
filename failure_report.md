# Test Failure Analysis

**Total Failures:** 141
- **Easy:** 0
- **Complex:** 69
- **Hard:** 72

## 1. Easy Fixes (Candidates for Auto-Fix)

## 2. Complex Issues (Auth/DB/Logic)
- **tests\integration\api.ai.doc.test.ts**
  - Test: `AI Document Assistant API Integration Tests POST /api/ai/doc/analyze should analyze a DOCX file and return variables`
  - Error: `AssertionError: expected 500 to be 200 // Object.is equality`
- **tests\integration\api.ai.doc.test.ts**
  - Test: `AI Document Assistant API Integration Tests POST /api/ai/doc/analyze should fail if no file is provided`
  - Error: `Error: expected 400 "Bad Request", got 500 "Internal Server Error"`
- **tests\integration\api.snapshots.test.ts**
  - Test: `Stage 13: Workflow Snapshots & Versioning should maintain immutability of runs across versions`
  - Error: `AssertionError: expected 401 to be 200 // Object.is equality`
- **tests\integration\api.templates-runs.test.ts**
  - Test: `Templates and Runs API Integration Tests Templates API POST /api/projects/:ctx.projectId/templates should reject non-docx files`
  - Error: `Error: expected 500 "Internal Server Error", got 400 "Bad Request"`
- **tests\integration\auth.flows.real.test.ts**
  - Test: `Auth Flows Integration Tests (REAL) Complete Registration → Login Flow should complete registration, verify email, then login`
  - Error: `AssertionError: expected 401 to be 403 // Object.is equality`
- **tests\integration\auth.flows.real.test.ts**
  - Test: `Auth Flows Integration Tests (REAL) Account Lockout Flow should lock account after 5 failed attempts, then unlock after waiting`
  - Error: `AssertionError: expected 401 to be 423 // Object.is equality`
- **tests\integration\auth.flows.real.test.ts**
  - Test: `Auth Flows Integration Tests (REAL) Password Reset Flow should complete full password reset flow`
  - Error: `AssertionError: expected 500 to be 200 // Object.is equality`
- **tests\integration\auth.flows.real.test.ts**
  - Test: `Auth Flows Integration Tests (REAL) Token Refresh Flow should rotate refresh token on each use`
  - Error: `AssertionError: expected 401 to be 200 // Object.is equality`
- **tests\integration\auth.flows.real.test.ts**
  - Test: `Auth Flows Integration Tests (REAL) Session Management Flow should list all active sessions`
  - Error: `AssertionError: expected 401 to be 200 // Object.is equality`
- **tests\integration\auth.routes.real.test.ts**
  - Test: `Auth Routes Integration Tests (REAL) POST /api/auth/login should return 403 for unverified email`
  - Error: `AssertionError: expected 401 to be 403 // Object.is equality`
- **tests\integration\auth.routes.real.test.ts**
  - Test: `Auth Routes Integration Tests (REAL) POST /api/auth/login should lock account after 5 failed attempts`
  - Error: `AssertionError: expected 401 to be 423 // Object.is equality`
- **tests\integration\js_helpers.test.ts**
  - Test: `Detailed Verification: JS Helper Availability should execute a JS block that uses helper functions`
  - Error: `AssertionError: expected 401 to be 201 // Object.is equality`
- **tests\integration\metrics.test.ts**
  - Test: `Metrics Integration should expose /metrics endpoint`
  - Error: `AssertionError: expected 401 to be 200 // Object.is equality`
- **tests\integration\mfa.flow.real.test.ts**
  - Test: `MFA Flow Integration Tests (REAL) MFA Setup Flow should reject invalid TOTP code during setup`
  - Error: `AssertionError: expected 401 to be 400 // Object.is equality`
- **tests\integration\mfa.flow.real.test.ts**
  - Test: `MFA Flow Integration Tests (REAL) MFA Login Flow should require MFA for enabled users`
  - Error: `AssertionError: expected 401 to be 200 // Object.is equality`
- **tests\integration\mfa.flow.real.test.ts**
  - Test: `MFA Flow Integration Tests (REAL) MFA Login Flow should accept TOTP codes within 60-second window`
  - Error: `AssertionError: expected 401 to be 200 // Object.is equality`
- **tests\integration\mfa.flow.real.test.ts**
  - Test: `MFA Flow Integration Tests (REAL) Backup Code Flow should try TOTP before backup code`
  - Error: `AssertionError: expected 401 to be 200 // Object.is equality`
- **tests\integration\mfa.flow.real.test.ts**
  - Test: `MFA Flow Integration Tests (REAL) MFA Status should return MFA status for user`
  - Error: `AssertionError: expected 401 to be 200 // Object.is equality`
- **tests\integration\mfa.flow.real.test.ts**
  - Test: `MFA Flow Integration Tests (REAL) Backup Code Regeneration should regenerate backup codes`
  - Error: `AssertionError: expected 401 to be 200 // Object.is equality`
- **tests\integration\mfa.flow.real.test.ts**
  - Test: `MFA Flow Integration Tests (REAL) Backup Code Regeneration should return error if MFA not enabled`
  - Error: `AssertionError: expected 401 to be 400 // Object.is equality`
- **tests\integration\mfa.flow.real.test.ts**
  - Test: `MFA Flow Integration Tests (REAL) Tenant-Level MFA Enforcement should enforce MFA for tenant users when required by tenant`
  - Error: `AssertionError: expected 401 to be 200 // Object.is equality`
- **tests\integration\session.management.real.test.ts**
  - Test: `Session Management Integration Tests (REAL) GET /api/auth/sessions should list all active sessions for current user`
  - Error: `AssertionError: expected 401 to be 200 // Object.is equality`
- **tests\integration\session.management.real.test.ts**
  - Test: `Session Management Integration Tests (REAL) DELETE /api/auth/sessions/all should return 400 if no active session found`
  - Error: `AssertionError: expected 401 to be 400 // Object.is equality`
- **tests\integration\trusted.devices.real.test.ts**
  - Test: `Trusted Devices Integration Tests (REAL) POST /api/auth/trust-device should trust current device`
  - Error: `AssertionError: expected 401 to be 200 // Object.is equality`
- **tests\integration\trusted.devices.real.test.ts**
  - Test: `Trusted Devices Integration Tests (REAL) GET /api/auth/trusted-devices should list all trusted devices`
  - Error: `AssertionError: expected 401 to be 200 // Object.is equality`
- **tests\integration\trusted.devices.real.test.ts**
  - Test: `Trusted Devices Integration Tests (REAL) DELETE /api/auth/trusted-devices/:deviceId should return 404 for non-existent device`
  - Error: `AssertionError: expected 401 to be 404 // Object.is equality`
- **tests\integration\trusted.devices.real.test.ts**
  - Test: `Trusted Devices Integration Tests (REAL) Device Trust with MFA Login should skip MFA for trusted device`
  - Error: `AssertionError: expected 401 to be 200 // Object.is equality`
- **tests\integration\auth\auth.middleware.integration.test.ts**
  - Test: `Auth Middleware Integration Tests Cookie Strategy Security should ignore cookies when Bearer token present`
  - Error: `Error: expected 200 "OK", got 401 "Unauthorized"`
- **tests\integration\auth\jwt.authentication.test.ts**
  - Test: `JWT Authentication Integration Tests JWT Token Generation should set JWT expiry to 15 minutes`
  - Error: `Error: expected 200 "OK", got 401 "Unauthorized"`
- **tests\integration\auth\jwt.authentication.test.ts**
  - Test: `JWT Authentication Integration Tests JWT Token Validation should accept request with missing Bearer prefix (lenient)`
  - Error: `Error: expected 200 "OK", got 401 "Unauthorized"`
- **tests\integration\auth\jwt.authentication.test.ts**
  - Test: `JWT Authentication Integration Tests Hybrid Authentication Strategy should allow GET requests with cookie auth only`
  - Error: `Error: expected 200 "OK", got 401 "Unauthorized"`
- **tests\integration\auth\jwt.authentication.test.ts**
  - Test: `JWT Authentication Integration Tests Token Refresh Flow should refresh access token using refresh token`
  - Error: `Error: expected 200 "OK", got 401 "Unauthorized"`
- **tests\integration\auth\jwt.authentication.test.ts**
  - Test: `JWT Authentication Integration Tests Token Refresh Flow should rotate refresh token on use`
  - Error: `Error: expected 200 "OK", got 401 "Unauthorized"`
- **tests\integration\auth\jwt.authentication.test.ts**
  - Test: `JWT Authentication Integration Tests Token Refresh Flow should detect token reuse and revoke all user tokens`
  - Error: `Error: expected 200 "OK", got 401 "Unauthorized"`
- **tests\integration\auth\jwt.authentication.test.ts**
  - Test: `JWT Authentication Integration Tests Logout Flow should revoke refresh token on logout`
  - Error: `Error: expected 200 "OK", got 401 "Unauthorized"`
- **tests\integration\auth\oauth2.token-refresh.test.ts**
  - Test: `OAuth2 Token Refresh Flow POST /api/auth/refresh-token should rotate refresh token after use`
  - Error: `AssertionError: expected 401 to be 200 // Object.is equality`
- **tests\integration\auth\oauth2.token-refresh.test.ts**
  - Test: `OAuth2 Token Refresh Flow POST /api/auth/refresh-token should update refresh token metadata on rotation`
  - Error: `AssertionError: expected 401 to be 200 // Object.is equality`
- **tests\integration\auth\oauth2.token-refresh.test.ts**
  - Test: `OAuth2 Token Refresh Flow POST /api/auth/refresh-token should set proper cookie attributes`
  - Error: `AssertionError: expected 401 to be 200 // Object.is equality`
- **tests\integration\auth\protected.routes.test.ts**
  - Test: `Protected Routes Integration Tests GET Protected Routes should allow access with valid Bearer token`
  - Error: `Error: expected 200 "OK", got 401 "Unauthorized"`
- **tests\integration\auth\protected.routes.test.ts**
  - Test: `Protected Routes Integration Tests GET Protected Routes should reject access without Authorization header`
  - Error: `Error: expected 200 "OK", got 401 "Unauthorized"`
- **tests\integration\auth\protected.routes.test.ts**
  - Test: `Protected Routes Integration Tests GET Protected Routes should reject access with empty Bearer token`
  - Error: `Error: expected 200 "OK", got 401 "Unauthorized"`
- **tests\integration\auth\protected.routes.test.ts**
  - Test: `Protected Routes Integration Tests POST Protected Routes should allow POST with valid Bearer token`
  - Error: `Error: expected 200 "OK", got 401 "Unauthorized"`
- **tests\integration\auth\protected.routes.test.ts**
  - Test: `Protected Routes Integration Tests POST Protected Routes should reject POST with invalid token`
  - Error: `Error: expected 200 "OK", got 401 "Unauthorized"`
- **tests\integration\auth\protected.routes.test.ts**
  - Test: `Protected Routes Integration Tests PUT Protected Routes should allow PUT with valid Bearer token`
  - Error: `Error: expected 200 "OK", got 401 "Unauthorized"`
- **tests\integration\auth\protected.routes.test.ts**
  - Test: `Protected Routes Integration Tests PUT Protected Routes should reject PUT without Bearer token`
  - Error: `Error: expected 200 "OK", got 401 "Unauthorized"`
- **tests\integration\auth\protected.routes.test.ts**
  - Test: `Protected Routes Integration Tests DELETE Protected Routes should allow DELETE with valid Bearer token`
  - Error: `Error: expected 200 "OK", got 401 "Unauthorized"`
- **tests\integration\auth\protected.routes.test.ts**
  - Test: `Protected Routes Integration Tests DELETE Protected Routes should reject DELETE without Bearer token`
  - Error: `Error: expected 200 "OK", got 401 "Unauthorized"`
- **tests\integration\auth\protected.routes.test.ts**
  - Test: `Protected Routes Integration Tests PATCH Protected Routes should allow PATCH with valid Bearer token`
  - Error: `Error: expected 200 "OK", got 401 "Unauthorized"`
- **tests\integration\auth\protected.routes.test.ts**
  - Test: `Protected Routes Integration Tests PATCH Protected Routes should reject PATCH without Bearer token`
  - Error: `Error: expected 200 "OK", got 401 "Unauthorized"`
- **tests\integration\auth\protected.routes.test.ts**
  - Test: `Protected Routes Integration Tests Token Edge Cases should handle Bearer token with extra spaces`
  - Error: `Error: expected 200 "OK", got 401 "Unauthorized"`
- **tests\integration\auth\protected.routes.test.ts**
  - Test: `Protected Routes Integration Tests Token Edge Cases should handle very long invalid token`
  - Error: `Error: expected 200 "OK", got 401 "Unauthorized"`
- **tests\integration\auth\protected.routes.test.ts**
  - Test: `Protected Routes Integration Tests Token Edge Cases should handle empty Authorization header`
  - Error: `Error: expected 200 "OK", got 401 "Unauthorized"`
- **tests\integration\auth\protected.routes.test.ts**
  - Test: `Protected Routes Integration Tests Token Edge Cases should reject token with SQL injection attempt`
  - Error: `Error: expected 200 "OK", got 401 "Unauthorized"`
- **tests\integration\auth\protected.routes.test.ts**
  - Test: `Protected Routes Integration Tests Token Payload Validation should reject token with non-existent userId`
  - Error: `Error: expected 200 "OK", got 401 "Unauthorized"`
- **tests\integration\auth\protected.routes.test.ts**
  - Test: `Protected Routes Integration Tests Cross-User Authorization should not allow user to access another user's resources`
  - Error: `Error: expected 200 "OK", got 401 "Unauthorized"`
- **tests\integration\auth\protected.routes.test.ts**
  - Test: `Protected Routes Integration Tests User Context Injection should inject userId into request context`
  - Error: `Error: expected 200 "OK", got 401 "Unauthorized"`
- **tests\integration\auth\session.management.integration.test.ts**
  - Test: `Session Management Integration Tests Session Creation and Tracking should create refresh token on login`
  - Error: `Error: expected 200 "OK", got 401 "Unauthorized"`
- **tests\integration\auth\session.management.integration.test.ts**
  - Test: `Session Management Integration Tests Session Creation and Tracking should track device metadata in session`
  - Error: `Error: expected 200 "OK", got 401 "Unauthorized"`
- **tests\integration\auth\session.management.integration.test.ts**
  - Test: `Session Management Integration Tests Session Creation and Tracking should create separate sessions for multiple device logins`
  - Error: `Error: expected 200 "OK", got 401 "Unauthorized"`
- **tests\integration\auth\session.management.integration.test.ts**
  - Test: `Session Management Integration Tests GET /api/auth/sessions should list all active sessions for user`
  - Error: `Error: expected 200 "OK", got 401 "Unauthorized"`
- **tests\integration\auth\session.management.integration.test.ts**
  - Test: `Session Management Integration Tests GET /api/auth/sessions should not include revoked sessions`
  - Error: `Error: expected 200 "OK", got 401 "Unauthorized"`
- **tests\integration\auth\session.management.integration.test.ts**
  - Test: `Session Management Integration Tests GET /api/auth/sessions should order sessions by last used (most recent first)`
  - Error: `Error: expected 200 "OK", got 401 "Unauthorized"`
- **tests\integration\auth\session.management.integration.test.ts**
  - Test: `Session Management Integration Tests DELETE /api/auth/sessions/:sessionId should revoke specific session`
  - Error: `Error: expected 200 "OK", got 401 "Unauthorized"`
- **tests\integration\auth\session.management.integration.test.ts**
  - Test: `Session Management Integration Tests DELETE /api/auth/sessions/:sessionId should prevent revoking current session`
  - Error: `Error: expected 200 "OK", got 401 "Unauthorized"`
- **tests\integration\auth\session.management.integration.test.ts**
  - Test: `Session Management Integration Tests DELETE /api/auth/sessions/:sessionId should not allow revoking other users sessions`
  - Error: `Error: expected 200 "OK", got 401 "Unauthorized"`
- **tests\integration\auth\session.management.integration.test.ts**
  - Test: `Session Management Integration Tests DELETE /api/auth/sessions/all should revoke all sessions except current`
  - Error: `Error: expected 200 "OK", got 401 "Unauthorized"`
- **tests\integration\auth\session.management.integration.test.ts**
  - Test: `Session Management Integration Tests DELETE /api/auth/sessions/all should revoke all trusted devices`
  - Error: `Error: expected 200 "OK", got 401 "Unauthorized"`
- **tests\integration\auth\session.management.integration.test.ts**
  - Test: `Session Management Integration Tests Session Expiration should reject refresh token after 30 days`
  - Error: `Error: expected 200 "OK", got 401 "Unauthorized"`
- **tests\integration\auth\session.management.integration.test.ts**
  - Test: `Session Management Integration Tests Concurrent Session Handling should handle concurrent token refreshes`
  - Error: `Error: expected 200 "OK", got 401 "Unauthorized"`

## 3. Hard Issues (Timeouts/Unknown)
- **tests\integration\analytics_service.test.ts**
  - Test: `Analytics Service Integration should generate events and metrics on run completion`
  - Error: `Error: Workflow is not active`
- **tests\integration\api.templates-runs.test.ts**
  - Test: `Templates and Runs API Integration Tests Runs API POST /api/workflows/:id/run should reject without required permission`
  - Error: `Error: expected 201 "Created", got 400 "Bad Request"`
- **tests\integration\auth.flows.real.test.ts**
  - Test: `Auth Flows Integration Tests (REAL) Account Lockout Flow should record all login attempts`
  - Error: `AssertionError: expected 1 to be 3 // Object.is equality`
- **tests\integration\auth.flows.real.test.ts**
  - Test: `Auth Flows Integration Tests (REAL) MFA Enrollment and Login Flow should complete MFA setup and login with TOTP`
  - Error: `AssertionError: expected undefined to be defined`
- **tests\integration\auth.flows.real.test.ts**
  - Test: `Auth Flows Integration Tests (REAL) MFA Enrollment and Login Flow should login with backup code when TOTP unavailable`
  - Error: `TypeError: Cannot read properties of undefined (reading 'secret')`
- **tests\integration\auth.flows.real.test.ts**
  - Test: `Auth Flows Integration Tests (REAL) Session Management Flow should revoke specific session`
  - Error: `TypeError: Cannot read properties of undefined (reading 'find')`
- **tests\integration\auth.routes.real.test.ts**
  - Test: `Auth Routes Integration Tests (REAL) POST /api/auth/logout should logout and clear refresh token cookie`
  - Error: `AssertionError: expected undefined to be defined`
- **tests\integration\auth.routes.real.test.ts**
  - Test: `Auth Routes Integration Tests (REAL) POST /api/auth/refresh-token should refresh access token with valid refresh token`
  - Error: `AssertionError: expected undefined to be defined`
- **tests\integration\mfa.flow.real.test.ts**
  - Test: `MFA Flow Integration Tests (REAL) MFA Setup Flow should complete full MFA setup flow`
  - Error: `TypeError: Cannot read properties of undefined (reading 'mfaEnabled')`
- **tests\integration\mfa.flow.real.test.ts**
  - Test: `MFA Flow Integration Tests (REAL) MFA Setup Flow should not allow MFA setup if already enabled`
  - Error: `AssertionError: expected undefined to be true // Object.is equality`
- **tests\integration\mfa.flow.real.test.ts**
  - Test: `MFA Flow Integration Tests (REAL) MFA Setup Flow should generate unique backup codes`
  - Error: `AssertionError: expected +0 to be 10 // Object.is equality`
- **tests\integration\mfa.flow.real.test.ts**
  - Test: `MFA Flow Integration Tests (REAL) MFA Setup Flow should store hashed backup codes`
  - Error: `AssertionError: expected [] to have a length of 10 but got +0`
- **tests\integration\mfa.flow.real.test.ts**
  - Test: `MFA Flow Integration Tests (REAL) MFA Login Flow should complete MFA login with valid TOTP`
  - Error: `AssertionError: expected undefined to be true // Object.is equality`
- **tests\integration\mfa.flow.real.test.ts**
  - Test: `MFA Flow Integration Tests (REAL) MFA Login Flow should reject invalid TOTP during login`
  - Error: `Error: [TEST UTILS] MFA Secret verification failed for 8713499057550be342fefb202173857d`
- **tests\integration\mfa.flow.real.test.ts**
  - Test: `MFA Flow Integration Tests (REAL) Backup Code Flow should login with valid backup code`
  - Error: `TypeError: Cannot read properties of undefined (reading 'secret')`
- **tests\integration\mfa.flow.real.test.ts**
  - Test: `MFA Flow Integration Tests (REAL) Backup Code Flow should prevent backup code reuse`
  - Error: `TypeError: Cannot read properties of undefined (reading 'secret')`
- **tests\integration\mfa.flow.real.test.ts**
  - Test: `MFA Flow Integration Tests (REAL) MFA Status should return backup codes count for MFA users`
  - Error: `Error: [TEST UTILS] MFA Secret verification failed for da6635d4126bd179a9120c9269475ad3`
- **tests\integration\mfa.flow.real.test.ts**
  - Test: `MFA Flow Integration Tests (REAL) MFA Disable Flow should disable MFA with password verification`
  - Error: `Error: [TEST UTILS] MFA Secret verification failed for bba729b3da44641fcb8ceb63cf3bcde2`
- **tests\integration\mfa.flow.real.test.ts**
  - Test: `MFA Flow Integration Tests (REAL) MFA Disable Flow should require correct password to disable MFA`
  - Error: `AssertionError: the given combination of arguments (undefined and string) is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a string`
- **tests\integration\regression-REG-1.test.ts**
  - Test: `REG-1: Workflow Logic Regression 1. Required + Show/Hide (Questions) should NOT block Next when required question is hidden`
  - Error: `AssertionError: expected true to be false // Object.is equality`
- **tests\integration\regression-REG-1.test.ts**
  - Test: `REG-1: Workflow Logic Regression 2. Required + Show/Hide (Pages) should skip hidden required page entirely`
  - Error: `AssertionError: expected true to be false // Object.is equality`
- **tests\integration\regression-REG-1.test.ts**
  - Test: `REG-1: Workflow Logic Regression 3. Preview/Snapshot/Live Parity should evaluate visibility consistently across modes`
  - Error: `AssertionError: expected true to be false // Object.is equality`
- **tests\integration\session.management.real.test.ts**
  - Test: `Session Management Integration Tests (REAL) GET /api/auth/sessions should mark current session correctly`
  - Error: `TypeError: Cannot read properties of undefined (reading 'find')`
- **tests\integration\session.management.real.test.ts**
  - Test: `Session Management Integration Tests (REAL) GET /api/auth/sessions should exclude revoked sessions`
  - Error: `TypeError: Cannot read properties of undefined (reading 'id')`
- **tests\integration\session.management.real.test.ts**
  - Test: `Session Management Integration Tests (REAL) GET /api/auth/sessions should order sessions by last used (most recent first)`
  - Error: `TypeError: Cannot read properties of undefined (reading 'length')`
- **tests\integration\session.management.real.test.ts**
  - Test: `Session Management Integration Tests (REAL) GET /api/auth/sessions should filter sessions by current user only`
  - Error: `TypeError: Cannot read properties of undefined (reading 'length')`
- **tests\integration\session.management.real.test.ts**
  - Test: `Session Management Integration Tests (REAL) DELETE /api/auth/sessions/:sessionId should revoke specific session`
  - Error: `TypeError: Cannot read properties of undefined (reading 'find')`
- **tests\integration\session.management.real.test.ts**
  - Test: `Session Management Integration Tests (REAL) DELETE /api/auth/sessions/:sessionId should prevent revoking current session`
  - Error: `TypeError: Cannot read properties of undefined (reading 'find')`
- **tests\integration\session.management.real.test.ts**
  - Test: `Session Management Integration Tests (REAL) DELETE /api/auth/sessions/:sessionId should prevent revoking other user's session`
  - Error: `TypeError: Cannot read properties of undefined (reading '0')`
- **tests\integration\session.management.real.test.ts**
  - Test: `Session Management Integration Tests (REAL) DELETE /api/auth/sessions/all should revoke all other sessions`
  - Error: `TypeError: Cannot read properties of undefined (reading 'find')`
- **tests\integration\session.management.real.test.ts**
  - Test: `Session Management Integration Tests (REAL) DELETE /api/auth/sessions/all should keep current session active`
  - Error: `TypeError: Cannot read properties of undefined (reading 'find')`
- **tests\integration\session.management.real.test.ts**
  - Test: `Session Management Integration Tests (REAL) Session Security should not expose sensitive token data`
  - Error: `TypeError: Cannot read properties of undefined (reading '0')`
- **tests\integration\trusted.devices.real.test.ts**
  - Test: `Trusted Devices Integration Tests (REAL) POST /api/auth/trust-device should set trust expiry to 30 days`
  - Error: `AssertionError: expected NaN to be 30 // Object.is equality`
- **tests\integration\trusted.devices.real.test.ts**
  - Test: `Trusted Devices Integration Tests (REAL) POST /api/auth/trust-device should update expiry if device already trusted`
  - Error: `AssertionError: expected false to be true // Object.is equality`
- **tests\integration\trusted.devices.real.test.ts**
  - Test: `Trusted Devices Integration Tests (REAL) GET /api/auth/trusted-devices should mark current device`
  - Error: `Error: [TEST UTILS] MFA Secret verification failed for 7cca6763566d40057254484856f8954b`
- **tests\integration\trusted.devices.real.test.ts**
  - Test: `Trusted Devices Integration Tests (REAL) GET /api/auth/trusted-devices should exclude revoked devices`
  - Error: `Error: [TEST UTILS] MFA Secret verification failed for c8fa2626f9e1fdc74f7bfe831470e3e2`
- **tests\integration\trusted.devices.real.test.ts**
  - Test: `Trusted Devices Integration Tests (REAL) GET /api/auth/trusted-devices should exclude expired devices`
  - Error: `TypeError: Cannot read properties of undefined (reading 'length')`
- **tests\integration\trusted.devices.real.test.ts**
  - Test: `Trusted Devices Integration Tests (REAL) DELETE /api/auth/trusted-devices/:deviceId should revoke specific device`
  - Error: `TypeError: Cannot read properties of undefined (reading '0')`
- **tests\integration\trusted.devices.real.test.ts**
  - Test: `Trusted Devices Integration Tests (REAL) DELETE /api/auth/trusted-devices/:deviceId should prevent revoking other user's device`
  - Error: `TypeError: Cannot read properties of undefined (reading '0')`
- **tests\integration\trusted.devices.real.test.ts**
  - Test: `Trusted Devices Integration Tests (REAL) Device Trust with MFA Login should require MFA for untrusted device`
  - Error: `AssertionError: expected undefined to be true // Object.is equality`
- **tests\integration\trusted.devices.real.test.ts**
  - Test: `Trusted Devices Integration Tests (REAL) Device Trust with MFA Login should update lastUsedAt on trusted device login`
  - Error: `TypeError: Cannot read properties of undefined (reading 'lastUsedAt')`
- **tests\integration\workflow_versioning.test.ts**
  - Test: `Workflow Versioning & Lineage should create a version and populate changelog`
  - Error: `Error: Validation failed: Schema Error: id - Required, Schema Error: title - Required`
- **tests\integration\workflow_versioning.test.ts**
  - Test: `Workflow Versioning & Lineage should track execution lineage via snapshot`
  - Error: `TypeError: Cannot read properties of undefined (reading 'id')`
- **tests\ui\expression-editor.test.tsx**
  - Test: `Expression Editor Hooks useExpressionValidation should validate expression after debounce`
  - Error: `AssertionError: expected false to be true // Object.is equality`
- **tests\ui\runs.components.test.tsx**
  - Test: `Stage 8: Runs UI Components RunsTable should render run data correctly`
  - Error: `TestingLibraryElementError: Found multiple elements with the text: Test Workflow`
- **tests\ui\runs.components.test.tsx**
  - Test: `Stage 8: Runs UI Components RunsTable should show download options for successful runs`
  - Error: `TestingLibraryElementError: Unable to find an element with the text: Download DOCX. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.`
- **tests\integration\auth\auth.middleware.integration.test.ts**
  - Test: `Auth Middleware Integration Tests requireAuth Middleware should allow access with valid JWT Bearer token`
  - Error: `TypeError: Cannot read properties of undefined (reading 'userId')`
- **tests\integration\auth\auth.middleware.integration.test.ts**
  - Test: `Auth Middleware Integration Tests requireAuth Middleware should return 401 when no token provided`
  - Error: `TypeError: Cannot read properties of undefined (reading 'userId')`
- **tests\integration\auth\auth.middleware.integration.test.ts**
  - Test: `Auth Middleware Integration Tests hybridAuth Middleware should authenticate with refresh token cookie (GET only)`
  - Error: `TypeError: Cannot read properties of undefined (reading 'userId')`
- **tests\integration\auth\auth.middleware.integration.test.ts**
  - Test: `Auth Middleware Integration Tests hybridAuth Middleware should reject cookie auth for POST requests (mutation-strict)`
  - Error: `TypeError: Cannot read properties of undefined (reading 'userId')`
- **tests\integration\auth\auth.middleware.integration.test.ts**
  - Test: `Auth Middleware Integration Tests hybridAuth Middleware should reject cookie auth for PUT requests`
  - Error: `TypeError: Cannot read properties of undefined (reading 'userId')`
- **tests\integration\auth\auth.middleware.integration.test.ts**
  - Test: `Auth Middleware Integration Tests hybridAuth Middleware should reject cookie auth for DELETE requests`
  - Error: `TypeError: Cannot read properties of undefined (reading 'userId')`
- **tests\integration\auth\auth.middleware.integration.test.ts**
  - Test: `Auth Middleware Integration Tests hybridAuth Middleware should allow cookie auth for HEAD requests`
  - Error: `TypeError: Cannot read properties of undefined (reading 'userId')`
- **tests\integration\auth\auth.middleware.integration.test.ts**
  - Test: `Auth Middleware Integration Tests hybridAuth Middleware should prioritize JWT over cookie when both present`
  - Error: `TypeError: Cannot read properties of undefined (reading 'userId')`
- **tests\integration\auth\auth.middleware.integration.test.ts**
  - Test: `Auth Middleware Integration Tests hybridAuth Middleware should return 401 when no auth provided`
  - Error: `TypeError: Cannot read properties of undefined (reading 'userId')`
- **tests\integration\auth\auth.middleware.integration.test.ts**
  - Test: `Auth Middleware Integration Tests hybridAuth Middleware should return 401 when both JWT and cookie are invalid`
  - Error: `TypeError: Cannot read properties of undefined (reading 'userId')`
- **tests\integration\auth\auth.middleware.integration.test.ts**
  - Test: `Auth Middleware Integration Tests optionalHybridAuth Middleware should authenticate with JWT if provided`
  - Error: `TypeError: Cannot read properties of undefined (reading 'userId')`
- **tests\integration\auth\auth.middleware.integration.test.ts**
  - Test: `Auth Middleware Integration Tests optionalHybridAuth Middleware should authenticate with cookie if JWT not provided`
  - Error: `TypeError: Cannot read properties of undefined (reading 'userId')`
- **tests\integration\auth\auth.middleware.integration.test.ts**
  - Test: `Auth Middleware Integration Tests optionalHybridAuth Middleware should proceed anonymously if no auth provided`
  - Error: `TypeError: Cannot read properties of undefined (reading 'userId')`
- **tests\integration\auth\auth.middleware.integration.test.ts**
  - Test: `Auth Middleware Integration Tests optionalHybridAuth Middleware should proceed anonymously if both JWT and cookie are invalid`
  - Error: `TypeError: Cannot read properties of undefined (reading 'userId')`
- **tests\integration\auth\auth.middleware.integration.test.ts**
  - Test: `Auth Middleware Integration Tests Error Handling should return consistent error format for missing token`
  - Error: `TypeError: Cannot read properties of undefined (reading 'userId')`
- **tests\integration\auth\auth.middleware.integration.test.ts**
  - Test: `Auth Middleware Integration Tests Error Handling should return consistent error format for expired token`
  - Error: `TypeError: Cannot read properties of undefined (reading 'userId')`
- **tests\integration\auth\auth.middleware.integration.test.ts**
  - Test: `Auth Middleware Integration Tests Error Handling should handle JWT with wrong algorithm`
  - Error: `TypeError: Cannot read properties of undefined (reading 'userId')`
- **tests\integration\auth\jwt.authentication.test.ts**
  - Test: `JWT Authentication Integration Tests JWT Token Generation should generate valid JWT token on successful login`
  - Error: `AssertionError: expected 0 to be greater than 0`
- **tests\integration\auth\oauth2.sessions.test.ts**
  - Test: `OAuth2 Session Management GET /api/auth/sessions - List Active Sessions should parse device name from user agent`
  - Error: `AssertionError: expected 0 to be greater than 0`
- **tests\integration\auth\oauth2.sessions.test.ts**
  - Test: `OAuth2 Session Management DELETE /api/auth/sessions/:sessionId - Revoke Session should prevent revoking current session`
  - Error: `AssertionError: expected 404 to be 400 // Object.is equality`
- **tests\integration\auth\oauth2.sessions.test.ts**
  - Test: `OAuth2 Session Management DELETE /api/auth/sessions/all - Logout All Other Devices should revoke all sessions except current`
  - Error: `AssertionError: expected +0 to be 1 // Object.is equality`
- **tests\integration\auth\oauth2.sessions.test.ts**
  - Test: `OAuth2 Session Management Trusted Devices Management POST /api/auth/trust-device should update existing trusted device expiry`
  - Error: `TypeError: Cannot read properties of undefined (reading 'lastUsedAt')`
- **tests\integration\auth\oauth2.token-refresh.test.ts**
  - Test: `OAuth2 Token Refresh Flow Refresh Token Lifecycle should support multiple active refresh tokens per user`
  - Error: `AssertionError: expected 0 to be greater than or equal to 3`
- **tests\integration\auth\oauth2.token-refresh.test.ts**
  - Test: `OAuth2 Token Refresh Flow Cookie Security should set appropriate expiry (30 days)`
  - Error: `AssertionError: expected 'refresh_token=; Max-Age=0; Path=/; Ht…' to contain 'Max-Age=2592000'`
- **tests\integration\auth\portal.authentication.test.ts**
  - Test: `File Level Error`
  - Error: `No test suite found in file C:/Users/scoot/poll/VaultLogic/tests/integration/auth/portal.authentication.test.ts`
- **tests\integration\auth\session.management.integration.test.ts**
  - Test: `Session Management Integration Tests GET /api/auth/sessions should mark current session correctly`
  - Error: `AssertionError: expected [] to have a length of 1 but got +0`
