npm warn Unknown project config "puppeteer_skip_download". This will stop working in the next major version of npm.

[1m[46m RUN [49m[22m [36mv4.0.5 [39m[90mC:/Users/scoot/poll/VaultLogic[39m

[90mstdout[2m | tests/integration/collections.e2e.test.ts
[22m[39m[dotenv@17.2.3] injecting env (11) from .env -- tip: Î“Â£Ã  audit secrets and track compliance: https://dotenvx.com/ops

[90mstdout[2m | tests/integration/collections.e2e.test.ts
[22m[39mâ‰¡Æ’ÂºÂ¬ Setting up test environment...

[90mstdout[2m | tests/integration/collections.e2e.test.ts
[22m[39mâ‰¡Æ’Âºâ•£ Cleaning up test environment...

 [31mÎ“Â¥Â»[39m tests/integration/collections.e2e.test.ts [2m([22m[2m22 tests[22m[2m | [22m[31m11 failed[39m[2m)[22m[33m 3244[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should create a collection[32m 110[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should list collections[32m 50[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should get a collection by ID[32m 53[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should update a collection[32m 107[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should create text field[32m 159[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should create email field[32m 150[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should create number field[32m 158[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should create select field with options[32m 164[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should create boolean field[32m 160[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should list all fields[32m 55[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should update field[39m[32m 215[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should create a record[39m[32m 163[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should create multiple records[39m[32m 151[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should list records with pagination[39m[32m 103[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should get a single record[39m[32m 52[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should update a record[39m[32m 53[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should find records by filters[39m[32m 102[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should delete a record[39m[32m 54[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should list collections with stats[39m[32m 164[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should enforce required fields[32m 151[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should validate field types[39m[32m 154[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should delete collection (cascade fields and records)[39m[32m 260[2mms[22m[39m

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Failed Tests 11 Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»

 FAIL  tests/integration/collections.e2e.test.ts > Collections System E2E Tests > Field Management > should update field
AssertionError: expected 'full_name' to be 'first_name' // Object.is equality

Expected: "first_name"
Received: "full_name"

 Î“Â¥Â» tests/integration/collections.e2e.test.ts:199:28
    197| 
    198|       expect(updated.name).toBe('Full Name');
    199|       expect(updated.slug).toBe('first_name'); // Slug shouldn't change
       |                            ^
    200|     });
    201|   });

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[1/11]Î“Ã„Â»

 FAIL  tests/integration/collections.e2e.test.ts > Collections System E2E Tests > Record CRUD Operations > should create a record
Error: Required field 'Full Name' (full_name) is missing
 Î“Â¥Â» RecordService.validateRecordData server/services/RecordService.ts:77:15
     75|     for (const field of fields) {
     76|       if (field.isRequired && !(field.slug in data)) {
     77|         throw new Error(`Required field '${field.name}' (${field.slug}Î“Ã‡Âª
       |               ^
     78|       }
     79|     }
 Î“Â¥Â» RecordService.createRecord server/services/RecordService.ts:222:5
 Î“Â¥Â» tests/integration/collections.e2e.test.ts:205:22

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[2/11]Î“Ã„Â»

 FAIL  tests/integration/collections.e2e.test.ts > Collections System E2E Tests > Record CRUD Operations > should create multiple records
Error: Required field 'Full Name' (full_name) is missing
 Î“Â¥Â» RecordService.validateRecordData server/services/RecordService.ts:77:15
     75|     for (const field of fields) {
     76|       if (field.isRequired && !(field.slug in data)) {
     77|         throw new Error(`Required field '${field.name}' (${field.slug}Î“Ã‡Âª
       |               ^
     78|       }
     79|     }
 Î“Â¥Â» RecordService.createRecord server/services/RecordService.ts:222:5
 Î“Â¥Â» tests/integration/collections.e2e.test.ts:227:23

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[3/11]Î“Ã„Â»

 FAIL  tests/integration/collections.e2e.test.ts > Collections System E2E Tests > Record CRUD Operations > should list records with pagination
AssertionError: expected +0 to be 3 // Object.is equality

- Expected
+ Received

- 3
+ 0

 Î“Â¥Â» tests/integration/collections.e2e.test.ts:259:29
    257|       });
    258| 
    259|       expect(result.length).toBe(3);
       |                             ^
    260|     });
    261| 

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[4/11]Î“Ã„Â»

 FAIL  tests/integration/collections.e2e.test.ts > Collections System E2E Tests > Record CRUD Operations > should get a single record
Error: Record not found
 Î“Â¥Â» RecordService.verifyRecordOwnership server/services/RecordService.ts:50:13
     48| 
     49|     if (!record) {
     50|       throw new Error("Record not found");
       |             ^
     51|     }
     52| 
 Î“Â¥Â» RecordService.getRecord server/services/RecordService.ts:236:12
 Î“Â¥Â» tests/integration/collections.e2e.test.ts:263:22

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[5/11]Î“Ã„Â»

 FAIL  tests/integration/collections.e2e.test.ts > Collections System E2E Tests > Record CRUD Operations > should update a record
Error: Record not found
 Î“Â¥Â» RecordService.verifyRecordOwnership server/services/RecordService.ts:50:13
     48| 
     49|     if (!record) {
     50|       throw new Error("Record not found");
       |             ^
     51|     }
     52| 
 Î“Â¥Â» RecordService.updateRecord server/services/RecordService.ts:272:20
 Î“Â¥Â» tests/integration/collections.e2e.test.ts:270:23

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[6/11]Î“Ã„Â»

 FAIL  tests/integration/collections.e2e.test.ts > Collections System E2E Tests > Record CRUD Operations > should find records by filters
AssertionError: expected +0 to be 1 // Object.is equality

- Expected
+ Received

- 1
+ 0

 Î“Â¥Â» tests/integration/collections.e2e.test.ts:289:29
    287|       );
    288| 
    289|       expect(result.length).toBe(1);
       |                             ^
    290|       expect((result[0].data as any).first_name).toBe('Jane');
    291|     });

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[7/11]Î“Ã„Â»

 FAIL  tests/integration/collections.e2e.test.ts > Collections System E2E Tests > Record CRUD Operations > should delete a record
Error: Record not found
 Î“Â¥Â» RecordService.verifyRecordOwnership server/services/RecordService.ts:50:13
     48| 
     49|     if (!record) {
     50|       throw new Error("Record not found");
       |             ^
     51|     }
     52| 
 Î“Â¥Â» RecordService.deleteRecord server/services/RecordService.ts:297:5
 Î“Â¥Â» tests/integration/collections.e2e.test.ts:294:7

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[8/11]Î“Ã„Â»

 FAIL  tests/integration/collections.e2e.test.ts > Collections System E2E Tests > Collection Stats > should list collections with stats
AssertionError: expected '0' to be 2 // Object.is equality

- Expected: 
2

+ Received: 
"0"

 Î“Â¥Â» tests/integration/collections.e2e.test.ts:312:47
    310|       expect(customerCollection).toBeDefined();
    311|       expect(customerCollection!.fieldCount).toBe(5);
    312|       expect(customerCollection!.recordCount).toBe(2);
       |                                               ^
    313|     });
    314|   });

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[9/11]Î“Ã„Â»

 FAIL  tests/integration/collections.e2e.test.ts > Collections System E2E Tests > Data Validation > should validate field types
Error: Required field 'Full Name' (full_name) is missing
 Î“Â¥Â» RecordService.validateRecordData server/services/RecordService.ts:77:15
     75|     for (const field of fields) {
     76|       if (field.isRequired && !(field.slug in data)) {
     77|         throw new Error(`Required field '${field.name}' (${field.slug}Î“Ã‡Âª
       |               ^
     78|       }
     79|     }
 Î“Â¥Â» RecordService.createRecord server/services/RecordService.ts:222:5
 Î“Â¥Â» tests/integration/collections.e2e.test.ts:331:22

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[10/11]Î“Ã„Â»

 FAIL  tests/integration/collections.e2e.test.ts > Collections System E2E Tests > Cleanup > should delete collection (cascade fields and records)
Error: Collection not found or access denied
 Î“Â¥Â» RecordService.listRecords server/services/RecordService.ts:256:13
    254|     const collection = await this.collectionRepo.findById(collectionIdÎ“Ã‡Âª
    255|     if (!collection || collection.tenantId !== tenantId) {
    256|       throw new Error("Collection not found or access denied");
       |             ^
    257|     }
    258| 
 Î“Â¥Â» tests/integration/collections.e2e.test.ts:364:23

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[11/11]Î“Ã„Â»


[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m11 failed[39m[22m[2m | [22m[1m[32m11 passed[39m[22m[90m (22)[39m
[2m   Start at [22m 14:21:54
[2m   Duration [22m 4.66s[2m (transform 455ms, setup 60ms, collect 951ms, tests 3.24s, environment 0ms, prepare 21ms)[22m

